#+PROPERTY: header-args:emacs-lisp :tangle (concat temporary-file-directory "åº­å°.el") :lexical t
#+title: åº­å°

#+begin_verse
  å°é›…ãƒ»å½¤å¼“ä¹‹ä»€ãƒ»åº­å°

  å¤œå¦‚ä½•å…¶ã€å¤œæœªå¤®ã€åº­å°ä¹‹å…‰
  å›å­è‡³æ­¢ã€é¸è²å°‡å°‡

  å¤œå¦‚ä½•å…¶ã€å¤œæœªè‰¾ã€åº­å°çš™çš™
  å›å­è‡³æ­¢ã€é¸è²å™¦å™¦

  å¤œå¦‚ä½•å…¶ã€å¤œéƒ·æ™¨ã€åº­å°æœ‰ç…‡
  å›å­è‡³æ­¢ã€è¨€è§€å…¶æ—‚
#+end_verse

å®¹çšƒä¹Ÿ

UI

* é¡Œ                                                           :noexport:

#+begin_src emacs-lisp :exports none
  ;;; åº­å°.el --- Nasy's emacs.d UI file.  -*- lexical-binding: t; -*-

  ;; Copyright (C) 2022  Nasy

  ;; Author: Nasy <nasyxx@gmail.com>

  ;;; Commentary:

  ;; å®¹çšƒä¹Ÿ

  ;;; Code:

  (cl-eval-when (compile)
    (setq nasy--require t)
    (add-to-list 'load-path (locate-user-emacs-file  "æ¡ƒå¤­/æ“Šé¼“" ))
    (add-to-list 'load-path (locate-user-emacs-file  "æ¡ƒå¤­/é¢¨é›¨" ))
    (require 'æ“Šé¼“)
    (require 'é¢¨é›¨)
    (require 'é¢¨é›¨æ—¹ç”¨)
    (sup 'consult)
    (sup 'dash)
    (sup 'projectile)
    (setq nasy--require nil))
#+end_src

* ç« 

** cal-china-x

This extension mainly adds the following extra features:

+ Chinese localizations
+ Display holiday, lunar(å†œå†), horoscope(æ˜Ÿåº§), zodiac(å±ç›¸ã€åäºŒç”Ÿè‚–), solar term(èŠ‚æ°”) info on mode line
+ Define holidays using holiday-lunar, holiday-solar-term
+ Highlight holidays based on different priorities
+ Add cal-china-x-chinese-holidays, cal-china-x-japanese-holidays.
+ Custom week diary (like weeks in school)

https://github.com/xwl/cal-china-x

#+begin_src emacs-lisp
  (n/leaf cal-china-x
    :doc "chinese localization, prioritized holiday highlight, lunar, horoscope, zodiac, etc."
    :url "https://github.com/xwl/cal-china-x"
    :tag "calendar" "date"
    :after calendar
    :custom
    (cal-china-x-force-chinese-week-day . t)
    (cal-china-x-always-show-jieqi      . t)
    :hook (nasy-first-key-hook . (lambda ()
                                   (require 'cal-china-x)
                                   (nasy/init-chinese-calendar)))
    :init (sup 'cal-china-x))

  (defun nasy/init-chinese-calendar ()
    "Initial Chinese calendar."
    (setq calendar-date-display-form
          '((cal-china-x-calendar-display-form
             (mapcar (lambda (el) (string-to-number el))
                     (list month day year)))))

    (setq diary-date-forms chinese-date-diary-pattern)

    (setq calendar-chinese-celestial-stem cal-china-x-celestial-stem
          calendar-chinese-terrestrial-branch cal-china-x-terrestrial-branch)

    (setq calendar-month-header '(propertize (format "%då¹´%2dæœˆ" year month)
                                             'font-lock-face
                                             'calendar-month-header))
    (when cal-china-x-force-chinese-week-day
      (setq calendar-day-header-array cal-china-x-days))

    (setq calendar-mode-line-format
          (list
           (calendar-mode-line-entry 'calendar-scroll-right "previous month" "<")
           "æ—¥æ›†"

           '(cal-china-x-get-holiday date)

           '(concat " " (calendar-date-string date t)
                    (format " ç¬¬%då‘¨"
                            (funcall (if cal-china-x-custom-week-start-date
                                         'cal-china-x-custom-week-of-date
                                       'cal-china-x-week-of-date)
                                     date)))

           '(cal-china-x-chinese-date-string date)


           (concat
            (calendar-mode-line-entry 'calendar-goto-info-node "read Info on Calendar"
                                      nil "info")
            " / "
            (calendar-mode-line-entry 'calendar-other-month "choose another month"
                                      nil "other")
            " / "
            (calendar-mode-line-entry 'calendar-goto-today "go to today's date"
                                      nil "today"))

           (calendar-mode-line-entry 'calendar-scroll-left "next month" ">")))

    (add-hook 'calendar-move-hook 'calendar-update-mode-line)
    (add-hook 'calendar-initial-window-hook 'calendar-update-mode-line)

    (add-hook 'calendar-mode-hook
              (lambda ()
                (set (make-local-variable 'font-lock-defaults)
                     ;; chinese month and year
                     '((("[0-9]+å¹´\\ *[0-9]+æœˆ" . font-lock-function-name-face)) t))))


    (advice-add 'calendar-mark-holidays :around 'cal-china-x-mark-holidays)
    (advice-add 'mouse-set-point :after 'cal-china-x-mouse-set-point))
#+end_src

** Centaur Tab

This projects aims to become an aesthetic, functional and efficient
tabs plugin for Emacs with a lot of customization options.

https://github.com/ema2159/centaur-tabs

#+begin_src emacs-lisp
  (n/leaf centaur-tabs
    :leaf-autoload nil
    :leaf-defun nil
    :custom
    (centaur-tabs-style . "wave")
    :hook
    ;; (nasy-first-key-hook   . (lambda () (require 'tab-line) (centaur-tabs-mode)))
    (nasy/font-change-hook . (lambda () (nasy/set-symbol ?âº 14)))
    :init (sup 'centaur-tabs))


  (defun nasy/-enable-centaur-tabs-local-mode ()
    (unless centaur-tabs-mode
      (centaur-tabs-mode 1))
    (centaur-tabs-local-mode 1))

  (defun nasy/-disable-centaur-tabs-local-mode ()
    (unless centaur-tabs-mode
      (centaur-tabs-mode 1))
    (centaur-tabs-local-mode -1))


  (defvar nasy--centaur-text-modes
    '(org-mode org-agenda-mode org-agenda-clockreport-mode
               org-agenda-log-mode org-beamer-mode
               org-bullets-mode org-cdlatex-mode
               org-indent-mode org-src-mode diary-mode
               text-mode markdown-mode))

  (defvar nasy--centaur-vc-modes
    '(magit-blame-mode magit-blob-mode magit-diff-mode
                       magit-file-mode magit-log-mode
                       magit-process-mode magit-status-mode))


  (defun nasy/-centaur-tabs-buffer-groups ()
    "Nasy's centaur tabs groups."
    (let ((bn (buffer-name)))
      (list
       (cond
        ;; org, markdown & text
        ((or (memq major-mode nasy--centaur-text-modes)
             (string-prefix-p "*Org Src" bn)
             (string-prefix-p "*Org Export" bn))
         "æ›¸å¯«")

        ;; VC
        ((memq major-mode nasy--centaur-vc-modes)
         "Magit")

        ;; Shell
        ((memq major-mode '(eshell-mode shell-mode vterm-mode))
         "Shell")

        ;; Info & Help
        ((memq major-mode '(help-mode info-mode helpful-mode))
         "æ³¨")

        ;; programming
        ((derived-mode-p 'prog-mode)
         "ç·¨ç¨‹")

        ;; Web Page
        ((or (memq major-mode '(eww-mode xwidget-webkit-mode))
             (string-prefix-p "*xwidget webkit" bn))
         "ç¶²é ")

        ;; Emacs
        ((string-prefix-p "*" bn)
         "è™›")

        ;; é›œ
        (t (centaur-tabs-get-group-name (current-buffer)))))))


  (n/leaf centaur-tabs
    :leaf-autoload nil
    :leaf-defun nil
    :after centaur-tabs
    :custom
    (centaur-tabs-set-modified-marker . t)
    (centaur-tabs-height     . 28)
    (centaur-tabs-bar-height . 30)
    ((centaur-tabs-set-close-button
      centaur-tabs-enable-ido-completion) . nil)
    :hook (nasy-magit-first-key-hook
           . nasy/-disable-centaur-tabs-local-mode)
    :mode-hook
    ;; (centaur-tabs-headline-match)

    (customize-set-variable 'centaur-tabs-set-icons t
                            "Customized by Nasy in `centaur-tabs' block")
    (customize-set-variable 'centaur-tabs-show-navigation-buttons t
                            "Customized by Nasy in `centaur-tabs' block")
    (setq centaur-tabs-active-bar
          (centaur-tabs--make-xpm 'centaur-tabs-active-bar-face
           4
           centaur-tabs-bar-height))
    :advice (:override centaur-tabs-buffer-groups nasy/-centaur-tabs-buffer-groups))
#+end_src

** Dashboard

#+begin_src emacs-lisp
  (n/leaf-nv dashboard
    :commands (dashboard-refresh-buffer
               dashboard-setup-startup-hook)
    :init (sup 'dashboard))


  (defun nasy/-set-dashboard-init-info (&rest _)
    (setq dashboard-init-info
          (let ((package-count 0) (time (emacs-init-time)))
            (setq package-count (+ (hash-table-size straight--profile-cache) package-count))
            (if (zerop package-count)
                (format "Emacs started in %s" time)
              (format "%d packages loaded in %s" package-count time)))))


  (defun nasy/-dashboard-items (_)
    (insert "\n")
    (widget-create 'item
                   :tag "è¿‘æœŸ (r)"
                   :action #'consult-recent-file
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸŒ“ "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open recent files")
    (insert "\t")
    (widget-create 'item
                   :tag "æ›¸ç±¤ (b)"
                   :action #'consult-bookmark
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸ”– "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open bookmarks")
    (insert "\t")
    (widget-create 'item
                   :tag "é …ç›® (p)"
                   :action #'projectile-switch-project
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸš€ "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open projects")
    (insert "               \n\n")
    (widget-create 'item
                   :tag "è‰ç¨¿ (c)"
                   :action #'persistent-scratch-restore
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸ“ "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "restore scratch buffer")
    (insert "\t")
    (widget-create 'item
                   :tag "è­°ç¨‹ (a)"
                   :action #'org-agenda
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸ—“ "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "Org Agenda")
    (insert "\t")
    (widget-create 'item
                   :tag "æ—¥æ›† (d)"
                   :action #'calendar
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸ“… "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open calendar")
    (insert "               \n\n")
    (widget-create 'item
                   :tag "èŠ„è˜­ (C)"
                   :action #'nasy/-open-custom
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "âš™ "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open custom file")
    (insert "\t")
    (widget-create 'item
                   :tag "æºç¢¼ (s)"
                   :action #'nasy/-open-source-page
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸ­ "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open https://github.com/nasyxx/emacs.d/")
    (insert "\t")
    (widget-create 'item
                   :tag "æ–‡æª” (D)"
                   :action #'nasy/-open-document
                   :mouse-face 'highlight
                   :button-face 'dashboard-heading
                   :button-prefix "ğŸ“– "
                   :button-suffix ""
                   :format "%[%t%]"
                   :help-echo "open https://emacs.nasy.moe")
    (insert "               \n\n"))


  (after-x 'dashboard
    (defun nasy/dashboard-refresh ()
      "Refresh dashboard buffer."
      (interactive)
      (unless (get-buffer dashboard-buffer-name)
        (generate-new-buffer "*dashboard*"))
      (dashboard-refresh-buffer)))


  (n/leaf-nv dashboard
    :leaf-autoload nil
    :bind
    ("<f5>" . dashboard-refresh-buffer)
    (:dashboard-mode-map
     ("r"              . consult-recent-file)
     ("b"              . consult-bookmark)
     ("p"              . projectile-switch-project)
     ("c"              . persistent-scratch-restore)
     ("a"              . org-agenda)
     ("d"              . calendar)
     ("C"              . nasy/-open-custom)
     ("s"              . nasy/-open-source-page)
     ("D"              . nasy/-open-document)
     ("g"              . dashboard-refresh-buffer)
     ("<down-mouse-1>" . nil)
     ("H-p"            . dashboard-previous-line)
     ("H-n"            . dashboard-next-line)
     ("H-b"            . widget-backward)
     ("H-f"            . widget-forward)
     ("<mouse-1>"      . widget-button-click)
     ("<mouse-2>"      . widget-button-click)
     ("<up>"           . widget-backward)
     ("<down>"         . nasy/wfw1))
    :hook
    ((dashboard-mode-hook . (lambda () (setq-local tab-width 1)))
     (after-init-hook     . dashboard-setup-startup-hook)
     (after-init-hook     . dashboard-refresh-buffer))
    (nasy/font-change-hook
     . (lambda ()
         (progn
           (nasy/set-apple-symbol ?ğŸŒ“)
           (nasy/set-apple-symbol ?ğŸ”–)
           (nasy/set-apple-symbol ?ğŸš€)
           (nasy/set-apple-symbol ?ğŸ“)
           (nasy/set-apple-symbol ?ğŸ—“)
           (nasy/set-apple-symbol ?ğŸ“…)
           (nasy/set-apple-symbol ?âš™)
           (nasy/set-apple-symbol ?ğŸ­)
           (nasy/set-apple-symbol ?ğŸ“–))))
    :custom
    (dashboard-items . '((n-items . t)))
                         ;; (bookmarks . t)))
                         ;; (registers . 5)
                         ;; (agenda    . 5)
                         ;; (projects  . 7)))
    (dashboard-item-generators . '((n-items . nasy/-dashboard-items)))
    ((dashboard-center-content
      dashboard-set-heading-icons
      dashboard-set-init-info) . t)
    `(dashboard-startup-banner
      . ,(concat *nasy-etc* "n_icon.png"))
    :advice (:before dashboard-refresh-buffer nasy/-set-dashboard-init-info))
#+end_src

** doom Theme

#+begin_src emacs-lisp
  (n/leaf-nv doom-themes
    :after all-the-icons
    :custom
    ((doom-dracula-brighter-comments
      doom-dracula-colorful-headers
      doom-dracula-comment-bg) . t)
    (doom-themes-treemacs-theme . "doom-colors")
    (doom-themes-org-fontify-special-tags . nil)
    :init (sup 'doom-themes)
    :config
    (after-x 'treemacs
      (doom-themes-treemacs-config))
    ;; (doom-themes-visual-bell-config)
    (after-x 'org
      (doom-themes-org-config)))
#+end_src

** Pretty Mode                                                  :pretty:

#+begin_src emacs-lisp
  ;; https://github.com/tonsky/FiraCode/wiki/Emacs-instructions
  (defun nasy/adjust-fira-code-symbol (charset &optional size)
    (let ((size (or size 14)))
      (set-fontset-font (frame-parameter nil 'font)
                        charset
                        (font-spec :family "Fira Code Symbol"
                                   :weight 'normal
                                   :size   size))))
  ;; I haven't found one statement that makes both of the above situations work, so I use both for now
  (defun pretty-fonts-set-fontsets (CODE-FONT-ALIST)
    "Utility to associate many unicode points with specified `CODE-FONT-ALIST'."
    (--each CODE-FONT-ALIST
      (-let (((font . codes) it))
        (--each codes
          (set-fontset-font nil `(,it . ,it) font)
          (set-fontset-font t `(,it . ,it) font)))))

  (defun pretty-fonts--add-kwds (FONT-LOCK-ALIST)
    "Exploits `font-lock-add-keywords'(`FONT-LOCK-ALIST') to apply regex-unicode replacements."
    (font-lock-add-keywords
     nil (--map (-let (((rgx uni-point) it))
                 `(,rgx (0 (progn
                             (compose-region
                              (match-beginning 1) (match-end 1)
                              ,(concat "\t" (list uni-point)))
                             nil))))
               FONT-LOCK-ALIST)))

  (defmacro pretty-fonts-set-kwds (FONT-LOCK-HOOKS-ALIST)
    "Set regex-unicode replacements to many modes(`FONT-LOCK-HOOKS-ALIST')."
    `(--each ,FONT-LOCK-HOOKS-ALIST
       (-let (((font-locks . mode-hooks) it))
         (--each mode-hooks
           (add-hook it (-partial 'pretty-fonts--add-kwds
                                  (symbol-value font-locks)))))))

  (defconst pretty-fonts-fira-font
    '(;; OPERATORS
      ;; Pipes
      ("\\(<|\\)" #Xe14d) ("\\(<>\\)" #Xe15b) ("\\(<|>\\)" #Xe14e) ("\\(|>\\)" #Xe135)

      ;; Brackets
      ("\\(<\\*\\)" #Xe14b) ("\\(<\\*>\\)" #Xe14c) ("\\(\\*>\\)" #Xe104)
      ("\\(<\\$\\)" #Xe14f) ("\\(<\\$>\\)" #Xe150) ("\\(\\$>\\)" #Xe137)
      ("\\(<\\+\\)" #Xe155) ("\\(<\\+>\\)" #Xe156) ("\\(\\+>\\)" #Xe13a)

      ;; Equality
      ("\\(!=\\)" #Xe10e) ("\\(!==\\)"         #Xe10f) ("\\(=/=\\)" #Xe143)
      ("\\(/=\\)" #Xe12c) ("\\(/==\\)"         #Xe12d)
      ("\\(===\\)" #Xe13d) ("[^!/]\\(==\\)[^>]" #Xe13c)

      ;; Equality Special
      ("\\(||=\\)"  #Xe133) ("[^|]\\(|=\\)" #Xe134)
      ("\\(~=\\)"   #Xe166)
      ("\\(\\^=\\)" #Xe136)
      ("\\(=:=\\)"  #Xe13b)

      ;; Comparisons
      ("\\(<=\\)" #Xe141) ("\\(>=\\)" #Xe145)
      ("\\(</\\)" #Xe162) ("\\(</>\\)" #Xe163)

      ;; Shifts
      ("[^-=]\\(>>\\)" #Xe147) ("\\(>>>\\)" #Xe14a)
      ("[^-=]\\(<<\\)" #Xe15c) ("\\(<<<\\)" #Xe15f)

      ;; Dots
      ("\\(\\.-\\)"    #Xe122) ("\\(\\.=\\)" #Xe123)
      ("\\(\\.\\.<\\)" #Xe125)

      ;; Hashes
      ("\\(#{\\)"  #Xe119) ("\\(#(\\)"   #Xe11e) ("\\(#_\\)"   #Xe120)
      ("\\(#_(\\)" #Xe121) ("\\(#\\?\\)" #Xe11f) ("\\(#\\[\\)" #Xe11a)

      ;; REPEATED CHARACTERS
      ;; 2-Repeats
      ("\\(||\\)" #Xe132)
      ("\\(!!\\)" #Xe10d)
      ("\\(%%\\)" #Xe16a)
      ("\\(&&\\)" #Xe131)

      ;; 2+3-Repeats
      ("\\(##\\)"       #Xe11b) ("\\(###\\)"          #Xe11c) ("\\(####\\)" #Xe11d)
      ("\\(--\\)"       #Xe111) ("\\(---\\)"          #Xe112)
      ("\\({-\\)"       #Xe108) ("\\(-}\\)"           #Xe110)
      ("\\(\\\\\\\\\\)" #Xe106) ("\\(\\\\\\\\\\\\\\)" #Xe107)
      ("\\(\\.\\.\\)"   #Xe124) ("\\(\\.\\.\\.\\)"    #Xe126)
      ("\\(\\+\\+\\)"   #Xe138) ("\\(\\+\\+\\+\\)"    #Xe139)
      ("\\(//\\)"       #Xe12f) ("\\(///\\)"          #Xe130)
      ("\\(::\\)"       #Xe10a) ("\\(:::\\)"          #Xe10b)

      ;; ARROWS
      ;; Direct
      ("[^-]\\(->\\)" #Xe114) ("[^=]\\(=>\\)" #Xe13f)
      ("\\(<-\\)"     #Xe152)
      ("\\(-->\\)"    #Xe113) ("\\(->>\\)"    #Xe115)
      ("\\(==>\\)"    #Xe13e) ("\\(=>>\\)"    #Xe140)
      ("\\(<--\\)"    #Xe153) ("\\(<<-\\)"    #Xe15d)
      ("\\(<==\\)"    #Xe158) ("\\(<<=\\)"    #Xe15e)
      ("\\(<->\\)"    #Xe154) ("\\(<=>\\)"    #Xe159)

      ;; Branches
      ("\\(-<\\)"  #Xe116) ("\\(-<<\\)" #Xe117)
      ("\\(>-\\)"  #Xe144) ("\\(>>-\\)" #Xe148)
      ("\\(=<<\\)" #Xe142) ("\\(>>=\\)" #Xe149)
      ("\\(>=>\\)" #Xe146) ("\\(<=<\\)" #Xe15a)

      ;; Squiggly
      ("\\(<~\\)" #Xe160) ("\\(<~~\\)" #Xe161)
      ("\\(~>\\)" #Xe167) ("\\(~~>\\)" #Xe169)
      ("\\(-~\\)" #Xe118) ("\\(~-\\)"  #Xe165)

      ;; MISC
      ("\\(www\\)"                   #Xe100)
      ("\\(<!--\\)"                  #Xe151)
      ("\\(~@\\)"                    #Xe164)
      ("[^<]\\(~~\\)"                #Xe168)
      ("\\(\\?=\\)"                  #Xe127)
      ("[^=]\\(:=\\)"                #Xe10c)
      ("\\(/>\\)"                    #Xe12e)
      ("[^\\+<>]\\(\\+\\)[^\\+<>]"   #Xe16d)
      ("[^:=]\\(:\\)[^:=]"           #Xe16c)
      ("\\(<=\\)"                    #Xe157))
    "Fira font ligatures and their regexes.")

  (n/leaf pretty-mode
    :hook
    (nasy/font-change-hook
     . (lambda ()
         (progn
           (when (display-graphic-p)
             (set-fontset-font (frame-parameter nil 'font)
                               '(#Xe100 . #Xe16f)
                               "Fira Code Symbol")
             (nasy/adjust-fira-code-symbol #Xe126 15)))))
    :init (sup 'pretty-mode)
    :defer-config
    (when (fboundp 'mac-auto-operator-composition-mode)
      (mac-auto-operator-composition-mode))
    (after-x 'dash
      (pretty-fonts-set-kwds
       '((pretty-fonts-fira-font prog-mode-hook org-mode-hook)))))
#+end_src

#+begin_src emacs-lisp
  (n/leaf pretty-mode
    :hook
    (nasy/font-change-hook
     . (lambda ()
         (progn
           (nasy/set-symbol ?â„‚ 13 'bold)
           (nasy/set-symbol ?ğ•” 16)
           (nasy/set-symbol ?ğ”» 13 'bold)
           (nasy/set-symbol ?ğ•• 14)
           (nasy/set-symbol ?ğ•ƒ 13 'bold)
           (nasy/set-symbol ?ğ• 14) ;; with â€… (1/4 space)
           (nasy/set-symbol ?â„ 12 'bold)
           (nasy/set-symbol ?ğ•£ 18)
           (nasy/set-symbol ?ğ•‹ 14 'bold)
           (nasy/set-symbol ?ğ•¥ 19)
           (nasy/set-symbol ?â„¤ 13 'bold)
           (nasy/set-symbol ?ğ•« 16)
           (nasy/set-symbol ?âˆ‘ 11 'bold)
           (nasy/set-symbol ?âˆ 11 'bold)
           (nasy/set-symbol ?âˆ… 11 'bold)
           (nasy/set-symbol ?â‹ƒ 11 'bold))))
    (prog-mode-hook
     . (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))
                   '(;; Data Type             P N
                     ("Float"  . #x211d)  ;; â„xxxx
                     ("float"  . #x211d)  ;; â„xxx
                     ("Int"    . #x2124)  ;; â„¤xxx
                     ("int"    . #x2124)  ;; â„¤xxx
                     ;; ("String" . #x1d57e)  ;; ğ•Š ğ•¾
                     ;; ("string" . #x1d598)  ;; ğ•¤ ğ–˜
                     ;; ("str"    . #x1d598)  ;; ğ•¤ ğ–˜
                     ("String" . (#x1d54a (Br . Bl) #x2006))  ;; ğ•Šâ€†xxxxxx
                     ("string" . (#x1d54a (Br . Bl) #x2006))  ;; ğ•¤â€†xxxxxx x1d564
                     ("str"    . (#x1d54a (Br . Bl) #x2006))  ;; ğ•¤â€†xxxx
                     ("Char"   . #x2102)   ;; â„‚x
                     ("char"   . #x1d554)  ;; ğ•”x

                     ("False"  . #x1d53d)  ;; ğ”½ ğ•±
                     ("True"   . #x1d54b)  ;; ğ•‹ ğ•¿

                     ("Any"    . #x2203)  ;; âˆƒ
                     ("any"    . #x2203)  ;; âˆƒ
                     ("any_"   . #x2203)  ;; âˆƒ
                     ("And"    . (#x2000 (Br . Bl) #x22c0 (Br . Bl) #x2005))  ;; â‹€
                     ("and"    . (#x2004 (Br . Bl) #x22cf (Br . Bl) #x2004 (Br . Bl) #x2009))  ;; â‹
                     ("Or"     . #x22c1)  ;; â‹
                     ("or"     . (#x2006 (Br . Bl) #x22cE (Br . Bl) #x2009))  ;; â‹
                     ("not"    . #x00ac)  ;; Â¬
                     ("not_"   . #x00ac)  ;; Â¬

                     ("All"    . #x2200)  ;; âˆ€
                     ("all"    . #x2200)  ;; âˆ€
                     ("all_"   . #x2200)  ;; âˆ€
                     ("for"    . #x2200)  ;; âˆ€
                     ("forall" . #x2200)  ;; âˆ€
                     ("forM"   . #x2200)  ;; âˆ€

                     ("pi"     . #x03c0)  ;; Ï€

                     ("sum"    . #x2211)  ;; âˆ‘
                     ("Sum"    . #x2211)  ;; âˆ‘
                     ("Product" . #x220F) ;; âˆ
                     ("product" . #x220F) ;; âˆ

                     ("None"   . #x2205)  ;; âˆ…
                     ("none"   . #x2205)  ;; âˆ…

                     ("in"     . (#x2006 (Br . Bl) #x2208 (Br . Bl) #x2009 (Br . Bl) #x2009))  ;; â€†âˆˆâ€‰â€‰
                     ("`elem`" . (#x2006 (Br . Bl) #x2208 (Br . Bl) #x2009 (Br . Bl) #x2009))  ;; â€†âˆˆâ€‰â€‰
                     ("not in"    . (#x2006 (Br . Bl) #x2209 (Br . Bl) #x2009 (Br . Bl) #x2009))  ;; â€†âˆ‰â€‰â€‰
                     ("`notElem`" . (#x2006 (Br . Bl) #x2209 (Br . Bl) #x2009 (Br . Bl) #x2009))  ;; â€†âˆ‰â€‰â€‰
                     ("return" . (#x21d2 (Br . Bl) #x2005 ))  ;; â‡’â€„â€†x (Br . Bl) #x2006
                     ("yield"  . (#x21d4 (Br . Bl) #x2004))  ;; â‡”â€„x xxxxxxxxxxxxxxxxx
                     ("pure"   . (#x21f0 (Br . Bl)))))))          ;; â‡° x

    ((prog-mode-hook
      emacs-lisp-mode-hook
      org-mode-hook)
     . (lambda () (mapc (lambda (pair) (push pair prettify-symbols-alist))
                   '(;; Global
                     ;; Pipes
                     ("<|"  . (?\s (Br . Bl) #Xe14d))
                     ("<>"  . (?\s (Br . Bl) #Xe15b))
                     ("<|>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe14e))
                     ("|>"  . (?\s (Br . Bl) #Xe135))

                     ;; Brackets
                     ("<*"  . (?\s (Br . Bl) #Xe14b))
                     ("<*>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe14c))
                     ("*>"  . (?\s (Br . Bl) #Xe104))
                     ("<$"  . (?\s (Br . Bl) #Xe14f))
                     ("<$>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe150))
                     ("$>"  . (?\s (Br . Bl) #Xe137))
                     ("<+"  . (?\s (Br . Bl) #Xe155))
                     ("<+>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe156))
                     ("+>"  . (?\s (Br . Bl) #Xe13a))
                     ("[]"  . (#x2005 (Br . Bl) #x1d731 (Br . Bl) #x2005))

                     ;; Equality
                     ("=/="  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe143))
                     ("/="   . (?\s (Br . Bl) #Xe12c))
                     ("/=="  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe12d))
                     ("/==>" . (?\s (Br . Bl) ?\s (Br . Bl) ?\s (Br . Bl) #Xe13c))
                     ("!==>" . (?\s (Br . Bl) ?\s (Br . Bl) ?\s (Br . Bl) #Xe13c))
                     ;; Special
                     ("||="  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe133))
                     ("|="   . (?\s (Br . Bl) #Xe134))
                     ("~="   . (?\s (Br . Bl) #Xe166))
                     ("^="   . (?\s (Br . Bl) #Xe136))
                     ("=:="  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe13b))

                     ;; Comparisons
                     ("</"   . (?\s (Br . Bl) #Xe162))
                     ("</>"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe163))

                     ;; Shifts
                     ("=>>"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe147))
                     ("->>"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe147))
                     (">>>"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe14a))
                     (">>>"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe14a))
                     ("=<<"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe15c))
                     ("-<<"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe15c))
                     ("<<<"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe15f))

                     ;; Dots
                     (".-"   . (?\s (Br . Bl) #Xe122))
                     (".="   . (?\s (Br . Bl) #Xe123))
                     ("..<"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe125))

                     ;; Hashes
                     ("#{"   . (?\s (Br . Bl) #Xe119))
                     ("#("   . (?\s (Br . Bl) #Xe11e))
                     ("#_"   . (?\s (Br . Bl) #Xe120))
                     ("#_("  . (?\s (Br . Bl) #Xe121))
                     ("#?"   . (?\s (Br . Bl) #Xe11f))
                     ("#["   . (?\s (Br . Bl) #Xe11a))

                     ;; REPEATED CHARACTERS
                     ;; 2-Repeats
                     ("!!"   . (?\s (Br . Bl) #Xe10d))
                     ("%%"   . (?\s (Br . Bl) #Xe16a))

                     ;; 2+3-Repeats
                     ("##"   . (?\s (Br . Bl) #Xe11b))
                     ("###"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe11c))
                     ("####" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe11d))
                     ("---"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe112))
                     ("{-"   . (?\s (Br . Bl) #Xe108))
                     ("-}"   . (?\s (Br . Bl) #Xe110))
                     ("\\\\" . (?\s (Br . Bl) #Xe106))
                     ("\\\\\\" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe107))
                     (".."   . (?\s (Br . Bl) #Xe124))
                     ("..."  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe126 (Br . Bl) #x200b))
                     ("+++"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe139))
                     ("//"   . (?\s (Br . Bl) #Xe12f))
                     ("///"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe130))
                     ("::"   . (?\s (Br . Bl) #Xe10a))  ;; î„Š
                     (":::"  . (?\s (Br . Bl) ?\s (Br . Bl) #Xe10b))

                     ;; Arrows
                     ;; Direct
                     ("->"  . (?\s (Br . Bl) #Xe114))  ;; î„”
                     ("=>"  . (?\s (Br . Bl) #Xe13f))
                     ("->>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe115))
                     ("=>>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe140))
                     ("<<-" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe15d))
                     ("<<=" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe15e))
                     ("<->" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe154))
                     ("<=>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe159))
                     ;; Branches
                     ("-<"  . (?\s (Br . Bl) #Xe116))
                     ("-<<" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe117))
                     (">-"  . (?\s (Br . Bl) #Xe144))
                     (">>-" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe148))
                     ("=<<" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe142))
                     (">=>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe146))
                     (">>=" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe149))
                     ("<=<" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe15a))
                     ;; Squiggly
                     ("<~"  . (?\s (Br . Bl) #Xe160))
                     ("<~~" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe161))
                     ("~>"  . (?\s (Br . Bl) #Xe167))
                     ("~~>" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe169))
                     ("-~"  . (?\s (Br . Bl) #Xe118))
                     ("~-"  . (?\s (Br . Bl) #Xe165))

                     ;; MISC
                     ("www" . (?\s (Br . Bl) ?\s (Br . Bl) #Xe100))
                     ("~@"  . (?\s (Br . Bl) #Xe164))
                     ("~~"  . (?\s (Br . Bl) #Xe168))
                     ("?="  . (?\s (Br . Bl) #Xe127))
                     (":="  . (?\s (Br . Bl) #Xe10c))
                     ("/>"  . (?\s (Br . Bl) #Xe12e))))))

    (python-mode-hook
     . (lambda ()
        (mapc (lambda (pair) (push pair prettify-symbols-alist))
              '(;; Syntax
                ;;("def"    . (#x1d521 (Br . Bl) #x1d522 (Br . Bl) #x1d523))
                ("def"    . (#x1d487 (Br . Bl) #x2006))  ;; ğ’‡ 1 111
                ("List"   . #x1d543)  ;; ğ•ƒ ğ•·
                ("list"   . (?ğ• (Br . Bl) #x2006))  ;; ğ•â€†â€† ğ–‘
                ("Dict"   . #x1d53B)  ;; ğ”» ğ•¯
                ("dict"   . #x1d555)  ;; ğ•• ğ–‰
                ("Set"    . #x1d61a)  ;; ğ”– ğ˜š
                ("set"    . #x1d634)  ;; ğ”° ğ˜´
                ("Tuple"  . #x1d61b)  ;; ğ•‹ ğ•¿ ğ˜›
                ("tuple"  . #x1d635)  ;; ğ•¥ ğ–™ ğ˜µ

                ("Union"  . #x22c3)  ;; â‹ƒ
                ("union"  . #x22c3)))))  ;; â‹ƒ

    (haskell-mode-hook
     . (lambda ()
        (mapc (lambda (pair) (push pair prettify-symbols-alist))
              '(;; Syntax
                ("pure" . (#x21f0 (Br . Bl) #x2006)))))) ;; â‡°â€† x
                       ;; (" . "  . (?\s (Br . Bl) #x2218 (Br . Bl) ?\s (Br . Bl) #x2006)) ;; âˆ˜
    :init)
#+end_src

#+begin_src emacs-lisp
  (defvar nasy-prog-mode-first-key-hook nil)
  (defvar nasy--prog-mode-first-key-hook nil)

  (defun nasy/-load-prog-mode ()
    (setq nasy--prog-mode-first-key-hook nasy-prog-mode-first-key-hook)
    (nasy/run-hook-once-on 'nasy--prog-mode-first-key-hook 'pre-command-hook))

  (add-hook 'prog-mode-hook #'nasy/-load-prog-mode)

  (add-hook 'nasy-prog-mode-first-key-hook #'(lambda () (prettify-symbols-mode 1)))
#+end_src

** Mode Line

#+begin_src emacs-lisp
  (defun nasy/-start-display-time ()
    "Nasy start display time mode."
    (customize-set-variable 'display-time-24hr-format          t "Customized by Nasy.")
    (customize-set-variable 'display-time-day-and-date         t "Customized by Nasy.")
    (customize-set-variable 'display-time-load-average         nil "Customized by Nasy.")
    (customize-set-variable 'display-time-default-load-average nil "Customized by Nasy.")
    (display-time-mode 1))

  (add-hook 'nasy-first-key-hook #'nasy/-start-display-time)
#+end_src

#+begin_src emacs-lisp
  (n/leaf nyan-mode
    :custom (nyan-animate-nyancat . t)
            (nyan-bar-length      . 16)
            (nyan-wavy-trail      . t)
    :hook after-init-hook
    :init (sup 'nyan-mode))
#+end_src

#+begin_src emacs-lisp
  (n/leaf minions
    :custom (minions-mode-line-lighter . "âœ¬")
    :hook after-init-hook
    :init (sup 'minions))
#+end_src

#+begin_src emacs-lisp
  (n/leaf doom-modeline
    :hook emacs-startup-hook
    :init (sup 'doom-modeline))

  (n/leaf doom-modeline
    :after doom-modeline
    :defun doom-modeline-def-modeline doom-modeline-def-segment
    :custom
    (inhibit-compacting-font-caches . t)
    ((doom-modeline-bar-width                   . 5)
     (doom-modeline-window-width-limit          . fill-column)
     (doom-modeline-project-detection           . 'project)  ;; changed
     ((doom-modeline-icon             ;; changed
       doom-modeline-unicode-fallback ;; changed
       doom-modeline-minor-modes)      ;; changed
       ;; doom-modeline-hud)             ;; changed
      . t)
     (doom-modeline-continuous-word-count-modes . '(markdown-mode gfm-mode org-mode text-mode))
     (doom-modeline-buffer-encoding             . nil)  ;; changed
     (doom-modeline-checker-simple-format       . nil)  ;; changed
     (doom-modeline-persp-name                  . nil))  ;; changed
    :defer-config)
   ;;  (doom-modeline-def-modeline 'main
   ;;    '(bar matches buffer-info "  " hud buffer-position word-count selection-info)
   ;;    '(misc-info battery grip github debug repl lsp minor-modes input-method major-mode process vcs checker))

   ;;  (doom-modeline-def-modeline 'minimal
   ;;   '(bar matches buffer-info-simple "  " hud)
   ;;   '(media-info major-mode))

   ;;  (doom-modeline-def-modeline 'special
   ;;   '(bar window-number modals matches buffer-info "  " hud buffer-position word-count parrot selection-info)
   ;;   '(objed-state misc-info battery irc-buffers debug minor-modes input-method indent-info buffer-encoding major-mode process))

   ;; (doom-modeline-def-modeline 'project
   ;;   '(bar window-number buffer-default-directory "  " hud)
   ;;   '(misc-info battery irc mu4e gnus github debug minor-modes input-method major-mode process))

   ;; (doom-modeline-def-modeline 'dashboard
   ;;   '(bar window-number buffer-default-directory-simple)
   ;;   '(misc-info battery irc mu4e gnus github debug minor-modes input-method major-mode process))

   ;; (doom-modeline-def-modeline 'vcs
   ;;   '(bar window-number modals matches buffer-info "  " hud buffer-position parrot selection-info)
   ;;   '(misc-info battery irc mu4e gnus github debug minor-modes buffer-encoding major-mode process))

   ;; (doom-modeline-def-modeline 'package
   ;;   '(bar window-number package)
   ;;   '(misc-info major-mode process))

   ;; (doom-modeline-def-modeline 'info
   ;;   '(bar window-number buffer-info "  " hud info-nodes buffer-position parrot selection-info)
   ;;   '(misc-info buffer-encoding major-mode))

   ;; (doom-modeline-def-modeline 'media
   ;;   '(bar window-number buffer-size buffer-info "  " hud)
   ;;   '(misc-info media-info major-mode process vcs))

   ;; (doom-modeline-def-modeline 'message
   ;;   '(bar window-number modals matches buffer-info-simple buffer-position word-count parrot selection-info)
   ;;   '(objed-state misc-info battery debug minor-modes input-method indent-info buffer-encoding major-mode))

   ;; (doom-modeline-def-modeline 'pdf
   ;;   '(bar window-number matches buffer-info "  " hud pdf-pages)
   ;;   '(misc-info major-mode process vcs))

   ;; (doom-modeline-def-modeline 'org-src
   ;;   '(bar window-number modals matches buffer-info-simple "  " hud buffer-position word-count parrot selection-info)
   ;;   '(objed-state misc-info debug lsp minor-modes input-method indent-info buffer-encoding major-mode process checker))

   ;; (doom-modeline-def-modeline 'timemachine
   ;;   '(bar window-number matches git-timemachine "  " hud buffer-position word-count parrot selection-info)
   ;;   '(misc-info minor-modes indent-info buffer-encoding major-mode)))
#+end_src

** Nasy Theme

#+begin_src emacs-lisp
  (n/leaf-nv nasy-theme
    :init (sup `(nasy-theme :local-repo ,(concat *nasy-site* "nasy/nasy-theme"))))
#+end_src

** Main Theme

#+begin_src emacs-lisp
  (defun nasy/load-theme ()
    "Nasy load theme function"
    (when *theme*
      (load-theme *theme* t)))

  (add-hook 'after-init-hook #'nasy/load-theme)
#+end_src

** Tool Bar

#+begin_src emacs-lisp
  (leaf tool-bar
    :tag "builtin"
    :bind
    (:tool-bar-map
     ([copy]            . nil)
     ([cut]             . nil)
     ([dired]           . nil)
     ([isearch-forward] . nil)
     ([new-file]        . nil)
     ([open-file]       . nil)
     ([paste]           . nil)
     ([save-buffer]     . nil)
     ([undo]            . nil)
     ([yank]            . nil))
     ;; ([dashboard-refresh-buffer]
     ;;  . `(menu-item))))
    :init (tool-bar-mode -1))
#+end_src

** Tab Line

#+begin_src emacs-lisp
  ;; (add-hook 'after-init-hook #'global-tab-line-mode)
  ;; (setq tab-line-close-tab-function #'kill-buffer)
#+end_src

* çµ                                                           :noexport:

#+begin_src emacs-lisp :exports none
  (provide 'åº­å°)
  ;;; åº­å°.el ends here
#+end_src

# Local Variables:
# org-src-fontify-natively: nil
# End:
